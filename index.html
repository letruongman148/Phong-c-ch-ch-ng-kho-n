<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr·∫Øc nghi·ªám Phong c√°ch Giao d·ªãch</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* M√†u n·ªÅn x√°m nh·∫°t */
            display: flex; /* S·ª≠ d·ª•ng flex ƒë·ªÉ cƒÉn gi·ªØa */
            justify-content: center; /* CƒÉn gi·ªØa theo chi·ªÅu ngang */
            align-items: center; /* CƒÉn gi·ªØa theo chi·ªÅu d·ªçc */
            min-height: 100vh; /* Chi·ªÅu cao t·ªëi thi·ªÉu b·∫±ng chi·ªÅu cao m√†n h√¨nh */
            margin: 0; /* B·ªè margin m·∫∑c ƒë·ªãnh c·ªßa body */
            padding: 1rem; /* Th√™m padding nh·ªè xung quanh */
            box-sizing: border-box; /* ƒê·∫£m b·∫£o padding kh√¥ng l√†m tƒÉng k√≠ch th∆∞·ªõc t·ªïng th·ªÉ */
        }
        .quiz-container {
            max-width: 600px;
            width: 100%; /* Chi·∫øm to√†n b·ªô chi·ªÅu r·ªông n·∫øu m√†n h√¨nh nh·ªè */
            margin: 0 auto; /* CƒÉn gi·ªØa n·∫øu kh√¥ng d√πng flex tr√™n body */
            padding: 2rem;
            background-color: white;
            border-radius: 12px; /* Bo g√≥c l·ªõn h∆°n */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .question-title {
            font-size: 1.25rem; /* 20px */
            font-weight: 600;
            margin-bottom: 1.5rem; /* 24px */
            color: #1f2937; /* M√†u ch·ªØ x√°m ƒë·∫≠m h∆°n */
        }
        .option-button {
            display: block;
            width: 100%;
            text-align: left;
            padding: 0.75rem 1rem; /* 12px 16px */
            margin-bottom: 0.75rem; /* 12px */
            border: 1px solid #d1d5db; /* Vi·ªÅn x√°m */
            border-radius: 8px; /* Bo g√≥c cho n√∫t */
            background-color: #ffffff; /* N·ªÅn tr·∫Øng */
            color: #374151; /* M√†u ch·ªØ x√°m v·ª´a */
            transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;
            cursor: pointer; /* Th√™m con tr·ªè chu·ªôt */
        }
        .option-button:hover {
            background-color: #f9fafb; /* X√°m nh·∫°t h∆°n khi hover */
            border-color: #9ca3af; /* Vi·ªÅn x√°m ƒë·∫≠m h∆°n khi hover */
        }
        .option-button.selected {
            background-color: #3b82f6; /* M√†u xanh d∆∞∆°ng cho l·ª±a ch·ªçn */
            color: white;
            border-color: #3b82f6;
        }
        .nav-button {
            padding: 0.625rem 1.25rem; /* 10px 20px */
            border-radius: 8px;
            font-weight: 500;
            transition: background-color 0.2s ease-in-out;
            cursor: pointer;
        }
        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .result-card {
            background-color: #eef2ff; /* N·ªÅn m√†u ch√†m nh·∫°t */
            padding: 1.5rem;
            border-radius: 12px;
            margin-top: 2rem;
            border: 1px solid #c7d2fe; /* Vi·ªÅn m√†u ch√†m */
        }
        .result-title {
            font-size: 1.5rem; /* 24px */
            font-weight: 700;
            color: #3730a3; /* Ch·ªØ m√†u ch√†m ƒë·∫≠m */
            margin-bottom: 0.75rem;
        }
        .result-text {
            font-size: 1rem; /* 16px */
            color: #4338ca; /* Ch·ªØ m√†u ch√†m */
            margin-bottom: 0.5rem;
        }
        .progress-bar-container {
            width: 100%;
            background-color: #e5e7eb; /* N·ªÅn x√°m nh·∫°t cho thanh ti·∫øn tr√¨nh */
            border-radius: 9999px; /* Bo tr√≤n ho√†n to√†n */
            height: 10px; /* Thanh ti·∫øn tr√¨nh m·ªèng h∆°n */
            margin-bottom: 1.5rem;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background-color: #3b82f6; /* M√†u xanh d∆∞∆°ng cho ti·∫øn tr√¨nh */
            border-radius: 9999px;
            transition: width 0.3s ease-in-out;
        }
        /* CSS ƒë·ªÉ ·∫©n radio button nh∆∞ng v·∫´n gi·ªØ ch·ª©c nƒÉng */
        .hidden-radio {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }
        /* Th√¥ng b√°o l·ªói */
        .error-message-box {
            position: fixed;
            top: 20px; /* C√°ch top 20px */
            left: 50%; /* CƒÉn gi·ªØa theo chi·ªÅu ngang */
            transform: translateX(-50%); /* ƒêi·ªÅu ch·ªânh ƒë·ªÉ th·ª±c s·ª± ·ªü gi·ªØa */
            background-color: #ef4444; /* M√†u ƒë·ªè */
            color: white;
            padding: 0.75rem 1.25rem; /* 12px 20px */
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            z-index: 1000; /* ƒê·∫£m b·∫£o hi·ªÉn th·ªã tr√™n c√πng */
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        .error-message-box.show {
            opacity: 1;
            visibility: visible;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h1 class="text-3xl font-bold text-center mb-8 text-indigo-700">TEST: PHONG C√ÅCH ƒê·∫¶U T∆Ø PH√ô H·ª¢P C·ª¶A B·∫†N L√Ä G√å?</h1>

        <div id="quiz-area">
            <div class="progress-bar-container">
                <div id="progress-bar" class="progress-bar" style="width: 0%;"></div>
            </div>
            <div id="question-container">
                </div>
            <div class="mt-8 flex justify-between items-center">
                <button id="prev-button" onclick="prevQuestion()" class="nav-button bg-gray-300 hover:bg-gray-400 text-gray-800" disabled>C√¢u tr∆∞·ªõc</button>
                <span id="question-counter" class="text-sm text-gray-600"></span>
                <button id="next-button" onclick="nextQuestion()" class="nav-button bg-blue-500 hover:bg-blue-600 text-white">C√¢u ti·∫øp</button>
            </div>
        </div>

        <div id="result-area" class="hidden">
            </div>
    </div>

    <div id="error-message" class="error-message-box">Vui l√≤ng ch·ªçn m·ªôt ƒë√°p √°n!</div>

    <script>
        // --- D·ªØ li·ªáu Tr·∫Øc nghi·ªám ---
        const questions = [
            {
                question: "‚è∞ B·∫°n c√≥ th·ªÉ theo d√µi th·ªã tr∆∞·ªùng trong gi·ªù h√†nh ch√≠nh?",
                options: {
                    A: "Lu√¥n theo ƒë∆∞·ª£c trong phi√™n",
                    B: "Theo d√µi ƒë∆∞·ª£c trong gi·ªù ngh·ªâ tr∆∞a ho·∫∑c sau gi·ªù l√†m",
                    C: "H·∫ßu nh∆∞ kh√¥ng c√≥ th·ªùi gian"
                }
            },
            {
                question: "üìà Khi c·ªï phi·∫øu b·∫°n n·∫Øm gi·ªØ gi·∫£m 5‚Äì7%, b·∫°n s·∫Ω‚Ä¶",
                options: {
                    A: "C·∫Øt ngay, t√¥i kh√¥ng th√≠ch thua s√¢u",
                    B: "C√¢n nh·∫Øc n·∫øu ch∆∞a g√£y trend",
                    C: "V·∫´n gi·ªØ n·∫øu c∆° b·∫£n t·ªët"
                }
            },
            {
                question: "üí° B·∫°n th√≠ch quy·∫øt ƒë·ªãnh ƒë·∫ßu t∆∞ d·ª±a tr√™n:",
                options: {
                    A: "Bi·ªÉu ƒë·ªì k·ªπ thu·∫≠t & v√πng gi√°",
                    B: "V√πng gi√° + k·∫øt h·ª£p tin t·ª©c ng√†nh v√† doanh nghi·ªáp",
                    C: "Doanh nghi·ªáp b·ªÅn v·ªØng v√† ƒë·ªãnh gi√° theo gi√° tr·ªã t√†i s·∫£n, P/E, ROE"
                }
            },
            {
                question: "‚ö° Ph·∫£n ·ª©ng c·ªßa b·∫°n khi c·ªï phi·∫øu tƒÉng 10% ch·ªâ trong v√†i ng√†y?",
                options: {
                    A: "B√°n ngay ho·∫∑c ch·ªët l·ªùi m·ªôt ph·∫ßn",
                    B: "Quan s√°t k·ªπ, s·∫µn s√†ng gi·ªØ th√™m n·∫øu trend c√≤n",
                    C: "T√¥i kh√¥ng quan t√¢m l·∫Øm, c√≤n xa gi√° m·ª•c ti√™u c·ªßa t√¥i"
                }
            },
            {
                question: "üß© B·∫°n th·∫•y ph√π h·ª£p v·ªõi chi·∫øn l∆∞·ª£c n√†o?",
                options: {
                    A: "L∆∞·ªõt s√≥ng nhanh, ƒÉn ng·∫Øn 3% -5%, ch·ªët l·ªùi ƒë·ªÅu",
                    B: "Mua c·ªï phi·∫øu kh·ªèe, ƒë·ª£i s√≥ng l·ªõn ƒÉn 20% -30%",
                    C: "C√≥ th·ªÉ n·∫Øm d√†i theo gi√° tr·ªã doanh nghi·ªáp, k·ª≥ v·ªçng tƒÉng gi√° 30% -50%"
                }
            }
        ];

        const results = {
            A: {
                style: "Swing ng·∫Øn h·∫°n 2 ng√†y ‚Äì 2 tu·∫ßn",
                system: "Breakout nhanh c√°c m·∫´u h√¨nh h·ª£p l√Ω + Pullback h·ªó tr·ª£ EMA10/21"
            },
            B: {
                style: "Giao d·ªãch theo xu h∆∞·ªõng trung h·∫°n 2 tu·∫ßn ‚Äì 3 th√°ng",
                system: "Mua breakout n·ªÅn t√≠ch l≈©y d√†i, b√°m theo ng√†nh kh·ªèe, c·ªï phi·∫øu kh·ªèe"
            },
            C: {
                style: "ƒê·∫ßu t∆∞ c∆° b·∫£n d√†i h·∫°n",
                system: "Mua t√≠ch s·∫£n trong giai ƒëo·∫°n t√≠ch l≈©y, ƒë·ªãnh gi√° h·ª£p l√Ω"
            }
        };

        // --- Bi·∫øn Tr·∫°ng th√°i ---
        let currentQuestionIndex = 0;
        const userAnswers = new Array(questions.length).fill(null); // L∆∞u tr·ªØ c√¢u tr·∫£ l·ªùi c·ªßa ng∆∞·ªùi d√πng

        // --- Ph·∫ßn t·ª≠ DOM ---
        const questionContainer = document.getElementById('question-container');
        const resultArea = document.getElementById('result-area');
        const quizArea = document.getElementById('quiz-area');
        const nextButton = document.getElementById('next-button');
        const prevButton = document.getElementById('prev-button');
        const progressBar = document.getElementById('progress-bar');
        const questionCounter = document.getElementById('question-counter');
        const errorMessageDiv = document.getElementById('error-message');

        // --- H√†m ---

        /**
         * Hi·ªÉn th·ªã th√¥ng b√°o l·ªói.
         * @param {string} message - N·ªôi dung th√¥ng b√°o.
         */
        function showErrorMessage(message) {
            errorMessageDiv.textContent = message;
            errorMessageDiv.classList.add('show');
            setTimeout(() => {
                errorMessageDiv.classList.remove('show');
            }, 3000); // ·∫®n th√¥ng b√°o sau 3 gi√¢y
        }

        /**
         * T·∫£i v√† hi·ªÉn th·ªã c√¢u h·ªèi hi·ªán t·∫°i.
         */
        function loadQuestion() {
            const currentQuestion = questions[currentQuestionIndex];
            questionContainer.innerHTML = ''; // X√≥a c√¢u h·ªèi tr∆∞·ªõc ƒë√≥

            const questionTitle = document.createElement('h2');
            questionTitle.className = 'question-title';
            questionTitle.textContent = `C√¢u ${currentQuestionIndex + 1}: ${currentQuestion.question}`;
            questionContainer.appendChild(questionTitle);

            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options-container';

            for (const key in currentQuestion.options) {
                const label = document.createElement('label');
                label.className = 'option-button';
                if (userAnswers[currentQuestionIndex] === key) {
                    label.classList.add('selected');
                }

                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = `question-${currentQuestionIndex}`;
                radio.value = key;
                radio.className = 'hidden-radio'; // ·∫®n radio button th·ª±c t·∫ø
                radio.checked = userAnswers[currentQuestionIndex] === key;

                label.onclick = () => {
                    selectOption(key, label);
                };

                label.appendChild(radio); 
                label.appendChild(document.createTextNode(`${key}. ${currentQuestion.options[key]}`));
                optionsDiv.appendChild(label);
            }
            questionContainer.appendChild(optionsDiv);
            updateNavigationButtons();
            updateProgressBar();
            updateQuestionCounter();
        }

        /**
         * X·ª≠ l√Ω vi·ªác ch·ªçn ƒë√°p √°n.
         * @param {string} optionKey - Kh√≥a c·ªßa ƒë√°p √°n ƒë∆∞·ª£c ch·ªçn (A, B, C).
         * @param {HTMLElement} selectedLabel - Ph·∫ßn t·ª≠ label c·ªßa ƒë√°p √°n ƒë∆∞·ª£c ch·ªçn.
         */
        function selectOption(optionKey, selectedLabel) {
            userAnswers[currentQuestionIndex] = optionKey;
            const optionButtons = questionContainer.querySelectorAll('.option-button');
            optionButtons.forEach(button => button.classList.remove('selected'));
            selectedLabel.classList.add('selected');
            updateNavigationButtons(); 
        }

        /**
         * Chuy·ªÉn ƒë·∫øn c√¢u h·ªèi ti·∫øp theo ho·∫∑c hi·ªÉn th·ªã k·∫øt qu·∫£ n·∫øu l√† c√¢u h·ªèi cu·ªëi c√πng.
         */
        function nextQuestion() {
            if (userAnswers[currentQuestionIndex] === null) {
                showErrorMessage('Vui l√≤ng ch·ªçn m·ªôt ƒë√°p √°n tr∆∞·ªõc khi ti·∫øp t·ª•c.');
                return;
            }

            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                showResults();
            }
        }

        /**
         * Chuy·ªÉn ƒë·∫øn c√¢u h·ªèi tr∆∞·ªõc ƒë√≥.
         */
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
            updateNavigationButtons();
        }

        /**
         * C·∫≠p nh·∫≠t tr·∫°ng th√°i (k√≠ch ho·∫°t/v√¥ hi·ªáu h√≥a) c·ªßa c√°c n√∫t ƒëi·ªÅu h∆∞·ªõng.
         */
        function updateNavigationButtons() {
            prevButton.disabled = currentQuestionIndex === 0;

            if (currentQuestionIndex === questions.length - 1) {
                nextButton.textContent = 'Xem K·∫øt qu·∫£';
                nextButton.disabled = userAnswers[currentQuestionIndex] === null;
            } else {
                nextButton.textContent = 'C√¢u ti·∫øp';
                nextButton.disabled = false; 
            }
        }

         /**
         * C·∫≠p nh·∫≠t thanh ti·∫øn tr√¨nh.
         */
        function updateProgressBar() {
            const progressPercentage = ((currentQuestionIndex + 1) / questions.length) * 100;
            progressBar.style.width = `${progressPercentage}%`;
        }

        /**
         * C·∫≠p nh·∫≠t vƒÉn b·∫£n b·ªô ƒë·∫øm c√¢u h·ªèi.
         */
        function updateQuestionCounter() {
            questionCounter.textContent = `C√¢u ${currentQuestionIndex + 1} / ${questions.length}`;
        }


        /**
         * T√≠nh to√°n v√† hi·ªÉn th·ªã k·∫øt qu·∫£ tr·∫Øc nghi·ªám.
         */
        function showResults() {
            const counts = { A: 0, B: 0, C: 0 }; // Ch·ªâ ƒë·∫øm A, B, C
            userAnswers.forEach(answer => {
                if (answer && counts.hasOwnProperty(answer)) counts[answer]++;
            });

            let maxCount = 0;
            let predominantlySelected = [];
            for (const option in counts) {
                if (counts[option] > maxCount) {
                    maxCount = counts[option];
                    predominantlySelected = [option];
                } else if (counts[option] === maxCount && maxCount > 0) { 
                    predominantlySelected.push(option);
                }
            }

            quizArea.classList.add('hidden'); 
            resultArea.classList.remove('hidden'); 
            resultArea.innerHTML = ''; 

            const resultTitle = document.createElement('h2');
            resultTitle.className = 'result-title text-center';


            if (predominantlySelected.length === 0 || maxCount === 0) { // maxCount === 0 ƒë·ªÉ x·ª≠ l√Ω tr∆∞·ªùng h·ª£p kh√¥ng c√≥ c√¢u tr·∫£ l·ªùi n√†o h·ª£p l·ªá
                 resultTitle.textContent = 'üéØ K·∫øt qu·∫£ Tr·∫Øc nghi·ªám üéØ';
                 const noAnswerText = document.createElement('p');
                 noAnswerText.className = 'result-text text-center';
                 noAnswerText.textContent = 'B·∫°n ch∆∞a tr·∫£ l·ªùi c√¢u h·ªèi n√†o ho·∫∑c kh√¥ng c√≥ ƒë·ªß d·ªØ li·ªáu. Vui l√≤ng l√†m l·∫°i b√†i tr·∫Øc nghi·ªám.';
                 resultArea.appendChild(resultTitle);
                 resultArea.appendChild(noAnswerText);
            } else if (predominantlySelected.length > 1) {
                resultTitle.textContent = 'üéØ Phong c√°ch Giao d·ªãch c·ªßa b·∫°n l√† s·ª± k·∫øt h·ª£p! üéØ';
                resultArea.appendChild(resultTitle);

                const tieIntro = document.createElement('p');
                tieIntro.className = 'result-text mb-4 text-center';
                tieIntro.textContent = 'B·∫°n c√≥ v·∫ª ph√π h·ª£p v·ªõi nhi·ªÅu phong c√°ch. D∆∞·ªõi ƒë√¢y l√† c√°c phong c√°ch n·ªïi b·∫≠t:';
                resultArea.appendChild(tieIntro);

                predominantlySelected.forEach(optionKey => {
                    const styleInfo = results[optionKey];
                    if (styleInfo) { // Ki·ªÉm tra xem styleInfo c√≥ t·ªìn t·∫°i kh√¥ng
                        const resultCard = document.createElement('div');
                        resultCard.className = 'result-card mb-4'; 

                        const styleElement = document.createElement('p');
                        styleElement.className = 'result-text font-semibold';
                        styleElement.innerHTML = `<strong>Phong c√°ch:</strong> ${styleInfo.style}`;
                        resultCard.appendChild(styleElement);

                        const systemElement = document.createElement('p');
                        systemElement.className = 'result-text';
                        systemElement.innerHTML = `<strong>H·ªá th·ªëng g·ª£i √Ω:</strong> ${styleInfo.system}`;
                        resultCard.appendChild(systemElement);
                        resultArea.appendChild(resultCard);
                    }
                });
            } else {
                const finalStyleKey = predominantlySelected[0];
                const finalResult = results[finalStyleKey];

                if (finalResult) { // Ki·ªÉm tra xem finalResult c√≥ t·ªìn t·∫°i kh√¥ng
                    resultTitle.textContent = `üéØ Phong c√°ch Giao d·ªãch c·ªßa b·∫°n: ${finalResult.style} üéØ`;
                    resultArea.appendChild(resultTitle);

                    const resultCard = document.createElement('div');
                    resultCard.className = 'result-card';

                    const styleElement = document.createElement('p');
                    styleElement.className = 'result-text text-lg'; 
                    styleElement.innerHTML = `D·ª±a tr√™n c√°c c√¢u tr·∫£ l·ªùi, phong c√°ch giao d·ªãch ph√π h·ª£p nh·∫•t v·ªõi b·∫°n l√† <strong>${finalResult.style}</strong>.`;
                    resultCard.appendChild(styleElement);

                    const systemTitle = document.createElement('p');
                    systemTitle.className = 'result-text mt-4 font-semibold';
                    systemTitle.textContent = 'H·ªá th·ªëng g·ª£i √Ω:';
                    resultCard.appendChild(systemTitle);

                    const systemElement = document.createElement('p');
                    systemElement.className = 'result-text';
                    systemElement.textContent = finalResult.system;
                    resultCard.appendChild(systemElement);
                    resultArea.appendChild(resultCard);
                } else {
                     resultTitle.textContent = 'üéØ K·∫øt qu·∫£ Tr·∫Øc nghi·ªám üéØ';
                     const errorText = document.createElement('p');
                     errorText.className = 'result-text text-center';
                     errorText.textContent = 'ƒê√£ c√≥ l·ªói x·∫£y ra khi x√°c ƒë·ªãnh k·∫øt qu·∫£. Vui l√≤ng th·ª≠ l·∫°i.';
                     resultArea.appendChild(resultTitle);
                     resultArea.appendChild(errorText);
                }
            }

            const restartButton = document.createElement('button');
            restartButton.textContent = 'L√†m l·∫°i tr·∫Øc nghi·ªám';
            restartButton.className = 'nav-button bg-green-500 hover:bg-green-600 text-white mt-8 mx-auto block';
            restartButton.onclick = () => {
                currentQuestionIndex = 0;
                userAnswers.fill(null);
                resultArea.classList.add('hidden');
                quizArea.classList.remove('hidden');
                nextButton.textContent = 'C√¢u ti·∫øp';
                nextButton.disabled = false; 
                loadQuestion();
            };
            resultArea.appendChild(restartButton);
        }

        // --- T·∫£i ban ƒë·∫ßu ---
        window.onload = () => {
            loadQuestion();
        };
    </script>
</body>
</html>
